install.packages(c("tidyverse","plm","readr","lmtest", "sandwhich","CasualImpact", "Synth"))
install.packages(c("tidyverse", "plm", "readr", "lmtest", "sandwhich", "CasualImpact", "Synth"))
setwd("~/Github/Biden-Inflation-v.-R.O.W")
library(tidyverse)
library(plm)
library(readr)
library(lmtest)
library(sandwhich)
install.package('sandwhich')
install.packages('sandwhich')
library(tidyverse)
library(plm)
library(readr)
library(lmtest)
library(sandwich)
library(CasualImpact)
install.packages('CausalImpact')
library(CasualImpact)
library(CausalImpact)
library(Synth)
# Loading in the data
df_raw = read.csv("imf PCPIPCH.csv")
# Renaming column
rawdf = rawdf %>%
rename(country = `Inflation rate, average consumer prices (Annual percent change)`)
# Loading in the data
df_raw = read.csv("imf PCPIPCH.csv")
# Renaming column
df_raw = df_raw %>%
rename(country = `Inflation rate, average consumer prices (Annual percent change)`)
View(df_raw)
# Renaming column
df_raw = df_raw %>%
rename(country = Inflation.rate..average.consumer.prices..Annual.percent.change.)
View(df_raw)
g7list = c("United States","Canada", "United Kingdom", "Germany", "Italy", "France", "Japan")
treated = "United States"
control = setdiff(g7list, treated)
treated_country = "United States"
control = setdiff(g7list, treated_country)
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = "year", values_to = "inflation_rate") %>%
mutate(year = as.integer(year), inflation_rate = as.numeric(inflation_rate))
View(df_g7)
View(df_g7)
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate") %>%
mutate(year = as.integer(year), inflation_rate = as.numeric(inflation_rate))
View(df_g7)
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate")
View(df_g7)
View(df_raw)
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate") %>%
mutate(across(c('year'), substr, 2, nchar(year)))
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate") %>%
mutate(across(year), substr, 2, nchar(year))
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate") %>%
mutate(across(c('year')), substr, 2, nchar(year)) %>%
mutate(year = as.integer(year), inflation_rate = as.numeric(inflation_rate))
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate") %>%
mutate(across(c('year'), substr, 2, nchar(year)))
View(df_g7)
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate") %>%
mutate(across(c('year'), substr, 2, nchar(year))) %>%
mutate(year = as.integer(year), inflation_rate = as.numeric(inflation_rate))
View(df_g7)
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate") %>%
mutate(across(c('year'), substr, 2, nchar(year))) %>%
mutate(year = as.integer(year), inflation_rate = as.numeric(inflation_rate))
df_g7 = df_raw %>%
filter(country %in% g7list) %>%
pivot_longer(-country, names_to = 'year', values_to = "inflation_rate") %>%
mutate(across(c('year'), substr, 2, nchar(year))) %>%
mutate(year = as.integer(year), inflation_rate = as.numeric(inflation_rate))
View(df_g7)
diff = df_g7 %>%
mutate(treated = ifelse(country == treated_country, 1, 0)) %>%
mutate(post = ifelse(year >= 2021, 1, 0),
treated_post = treated*post)
View(diff)
View(df_g7)
df_g7 = df_g7 %>%
filter(year >= 2011 & year < 2025)
diff = df_g7 %>%
mutate(treated = ifelse(country == treated_country, 1, 0)) %>%
mutate(post = ifelse(year >= 2021, 1, 0),
treated_post = treated*post)
View(diff)
formula = as.formula('inflation rate ~ treated + post + treated_post')
View(diff)
formula = as.formula('inflation_rate ~ treated + post + treated_post')
model = lm(formula, data = diff)
View(model)
View(model)
dif = pdata.frame(diff, index = c("country","year"))
View(dif)
View(diff)
diff = pdata.frame(diff, index = c("country","year"))
View(diff)
View(diff)
fe_formula = as.formula("inflation_rate ~ treated + post + treated_post + factor(country)-1")
summary(model)
fe_model = plm(fe_formula, data = diff, model = "within", effect = "individual", index = c("country","year"))
summary(fe_model)
coeftest(fe_model, vcov = vcovHC(fe_model, type = "HC1", cluster = "group"))
summary(fe_model)
summary(model)
df_wide = df_g7 %>%
pivot_wider(names_from = country, values_from = inflation_rate) %>%
arrange(year)
View(df_wide)
df_wide = df_wide %>%
select(year, "United States", everything())
View(df_wide)
df_wide = df_Wide %>%
rename(USA = "United States", UK = "United Kingdom")
View(df_wide)
z = zoo(df_wide[-1], order.by = df_wide$year)
z = zoo(df_wide[-1], order.by = df_wide$year)
pre_period = c(2011,2020)
post_period = c(2021,2023)
# Causal Impact Analysis
impact = CausalImpact(z, pre_period, post_period)
df_wide = df_wide %>%
rename(`United States` = "USA", `United Kingdom` = "UK")
View(df_wide)
df_wide = df_wide %>%
rename(USA = `United States`, UK = `United Kingdom`)
View(df_wide)
z = zoo(df_wide[-1], order.by = df_wide$year)
pre_period = c(2011,2020)
post_period = c(2021,2023)
# Causal Impact Analysis
impact = CausalImpact(z, pre_period, post_period)
summary(impact)
plot(impact)
df_g7$country = recode(df_g7$country, "United States" = "USA", "United Kingdom" = "UK")
df = df_g7
unique_countries = unique_countries[unique_countries != "USA"]
unique_countries = unique(df$country)
# Removing USA
unique_countries = unique_countries[unique_countries != "USA"]
group_id = seq_along(unique_countries)
mapping_df = data.frame(country = c("USA", unique_countries),
group_id = c(0,group_id))
View(mapping_df)
df = merge(df, mapping_df, by = "country", all.x = TRUE)
View(df)
